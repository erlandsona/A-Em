#!/usr/bin/env bash
set -e

# Clean
rm -rf ./public
mkdir public

# Copy Static Assets
cp -R app/assets public/

cp build/index.tpl.html public/index.html
cp build/index.tpl.html public/404.html
cp build/bundle-init.js public/

# Compile elm-css
elm-css build/Stylesheets.elm -o public/

# Compile elm-js
elm-make app/Caldwell.elm --output=public/bundle.js

# Send to gh-pages branch
./build/production/deploy

# copy index.html to 404.html for "pushstate" imitation

